<UserControl
	x:Class="BlockProgramming.UserControl1"
	xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
	xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
	xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
	xmlns:dd="urn:gong-wpf-dragdrop"
	xmlns:i="http://schemas.microsoft.com/xaml/behaviors"
	xmlns:local="clr-namespace:BlockProgramming"
	xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
	x:Name="userControl1"
	d:DesignHeight="450"
	d:DesignWidth="800"
	mc:Ignorable="d">
	<UserControl.Resources>
		<ItemsPanelTemplate x:Key="FluidStackPanel">
			<StackPanel VirtualizingPanel.ScrollUnit="Pixel">
				<i:Interaction.Behaviors>
					<i:FluidMoveBehavior
						AppliesTo="Children"
						Tag="DataContext"
						Duration="00:00:00.5">
						<i:FluidMoveBehavior.EaseY>
							<CircleEase EasingMode="EaseOut" />
						</i:FluidMoveBehavior.EaseY>
					</i:FluidMoveBehavior>
					<i:MouseDragElementBehavior ConstrainToParentBounds="True" />
				</i:Interaction.Behaviors>
			</StackPanel>
		</ItemsPanelTemplate>
	</UserControl.Resources>
	<Grid>
		<Grid.RowDefinitions>
			<RowDefinition />
			<RowDefinition Height="Auto" />
		</Grid.RowDefinitions>
		<Grid>
			<Grid.ColumnDefinitions>
				<ColumnDefinition />
			</Grid.ColumnDefinitions>
			<ListView
				x:Name="listView"
				Grid.Column="0"
				Grid.ColumnSpan="2"
				MinWidth="200"
				HorizontalContentAlignment="Stretch"
				dd:DragDrop.IsDragSource="True"
				dd:DragDrop.IsDropTarget="True"
				AllowDrop="True"
				ItemsPanel="{StaticResource FluidStackPanel}"
				ItemsSource="{Binding Functions, ElementName=userControl1}"
				SelectedIndex="{Binding SelectedIndex, ElementName=userControl1}"
				VirtualizingPanel.ScrollUnit="Pixel"
				VirtualizingPanel.VirtualizationMode="Recycling">
				<ListView.ItemTemplate>
					<DataTemplate DataType="{x:Type local:FunctionBlockViewModel}">
						<local:FunctionBlock
							x:Name="Block"
							Width="Auto"
							MinWidth="200"
							Margin="5,3"
							HorizontalAlignment="Stretch"
							VerticalAlignment="Stretch" />
					</DataTemplate>
				</ListView.ItemTemplate>
			</ListView>
		</Grid>
		<Grid Grid.Row="1">
			<Grid>
				<Grid x:Name="UI_Buttons">
					<Grid.ColumnDefinitions>
						<ColumnDefinition Width="2*" />
						<ColumnDefinition Width="2*" />
						<ColumnDefinition Width="1*" />
					</Grid.ColumnDefinitions>
					<Grid Margin="5,0">
						<Grid.RowDefinitions>
							<RowDefinition />
							<RowDefinition />
						</Grid.RowDefinitions>
						<Button
							MinWidth="100"
							Margin="0,5"
							HorizontalAlignment="Stretch"
							VerticalAlignment="Stretch"
							Click="Button_Click_2"
							Content="ブロック追加"
							FontSize="20" />
						<Grid Grid.Row="1" Margin="0,5">
							<Grid>
								<Grid.ColumnDefinitions>
									<ColumnDefinition Width="1*" />
									<ColumnDefinition Width="1*" />
								</Grid.ColumnDefinitions>
								<Grid Margin="0,0,5,0">
									<Button
										Click="Button_Click_5"
										Content="元に戻す"
										FontSize="20"
										IsEnabled="{Binding undoRedoViewModel.CanUndo, ElementName=userControl1}"/>
								</Grid>
								<Grid Grid.Column="1" Margin="5,0,0,0">
									<Button
										Click="Button_Click_6"
										Content="やり直し"
										FontSize="20"
										IsEnabled="{Binding undoRedoViewModel.CanRedo ,ElementName=userControl1}"/>
								</Grid>
							</Grid>
						</Grid>
					</Grid>
					<Grid Grid.Column="1" Margin="20,5">
						<Button
							MinWidth="100"
							HorizontalAlignment="Stretch"
							VerticalAlignment="Stretch"
							Click="Button_Click_3"
							Content="サンプル設定"
							FontSize="20" />
					</Grid>
					<Grid Grid.Column="2" Margin="20,0">
						<Button
							MinWidth="100"
							Margin="0,5"
							HorizontalAlignment="Stretch"
							VerticalAlignment="Stretch"
							Click="JsonOutput"
							Content="登録"
							FontSize="20" />
					</Grid>
				</Grid>
			</Grid>
		</Grid>
	</Grid>

</UserControl>
